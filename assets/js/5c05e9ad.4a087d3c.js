(self.webpackChunknewshopify=self.webpackChunknewshopify||[]).push([[941],{3905:function(t,e,n){"use strict";n.d(e,{Zo:function(){return c},kt:function(){return m}});var a=n(7294);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e){if(null==t)return{};var n,a,i=function(t,e){if(null==t)return{};var n,a,i={},r=Object.keys(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var u=a.createContext({}),p=function(t){var e=a.useContext(u),n=e;return t&&(n="function"==typeof t?t(e):l(l({},e),t)),n},c=function(t){var e=p(t.components);return a.createElement(u.Provider,{value:e},t.children)},s={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},d=a.forwardRef((function(t,e){var n=t.components,i=t.mdxType,r=t.originalType,u=t.parentName,c=o(t,["components","mdxType","originalType","parentName"]),d=p(n),m=i,f=d["".concat(u,".").concat(m)]||d[m]||s[m]||r;return n?a.createElement(f,l(l({ref:e},c),{},{components:n})):a.createElement(f,l({ref:e},c))}));function m(t,e){var n=arguments,i=e&&e.mdxType;if("string"==typeof t||i){var r=n.length,l=new Array(r);l[0]=d;var o={};for(var u in e)hasOwnProperty.call(e,u)&&(o[u]=e[u]);o.originalType=t,o.mdxType="string"==typeof t?t:i,l[1]=o;for(var p=2;p<r;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9478:function(t,e,n){"use strict";n.r(e),n.d(e,{frontMatter:function(){return o},contentTitle:function(){return u},metadata:function(){return p},toc:function(){return c},default:function(){return d}});var a=n(2122),i=n(9756),r=(n(7294),n(3905)),l=["components"],o={id:"cart",titre:"Cart",sidebar_label:"Cart"},u=void 0,p={unversionedId:"dynamisation/cart",id:"dynamisation/cart",isDocsHomePage:!1,title:"cart",description:"Table of contents",source:"@site/docs/dynamisation/cart.md",sourceDirName:"dynamisation",slug:"/dynamisation/cart",permalink:"/docs/dynamisation/cart",version:"current",frontMatter:{id:"cart",titre:"Cart",sidebar_label:"Cart"},sidebar:"docs",previous:{title:"Search",permalink:"/docs/dynamisation/search"},next:{title:"Shopify+",permalink:"/docs/shopifyplus"}},c=[{value:"Table of contents",id:"table-of-contents",children:[]},{value:"Ajouter un produit automatiquement au panier",id:"ajouter-un-produit-automatiquement-au-panier",children:[]},{value:"Ajax - Mini Cart",id:"ajax---mini-cart",children:[{value:"Create the Liquid file",id:"create-the-liquid-file",children:[]},{value:"Create the JavaScript file",id:"create-the-javascript-file",children:[]},{value:"Update the layout file",id:"update-the-layout-file",children:[]},{value:"How to use it",id:"how-to-use-it",children:[]}]},{value:"Mini Cart",id:"mini-cart",children:[{value:"Create the Liquid file",id:"create-the-liquid-file-1",children:[]},{value:"Add payment button",id:"add-payment-button",children:[]}]},{value:"Display Shipping rates estimates in the Cart",id:"display-shipping-rates-estimates-in-the-cart",children:[]}],s={toc:c};function d(t){var e=t.components,n=(0,i.Z)(t,l);return(0,r.kt)("wrapper",(0,a.Z)({},s,n,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"table-of-contents"},"Table of contents"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#table-of-contents"},"Table of contents")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#ajouter-un-produit-automatiquement-au-panier"},"Ajouter un produit automatiquement au panier")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#ajax---mini-cart"},"Ajax - Mini Cart"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#create-the-liquid-file"},"Create the Liquid file")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#create-the-javascript-file"},"Create the JavaScript file")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#update-the-layout-file"},"Update the layout file")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#how-to-use-it"},"How to use it")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#mini-cart"},"Mini Cart"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#create-the-liquid-file-1"},"Create the Liquid file")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#add-payment-button"},"Add payment button")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#display-shipping-rates-estimates-in-the-cart"},"Display Shipping rates estimates in the Cart"))),(0,r.kt)("h2",{id:"ajouter-un-produit-automatiquement-au-panier"},"Ajouter un produit automatiquement au panier"),(0,r.kt)("p",null,"Dans l'exemple, on v\xe9rifie que le produit n'est pas d\xe9j\xe0 dans le panier et que le montant du panier est > 100 (il est calcul\xe9 en cents)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js\"><\/script>\n{% assign found_title = false %}\n{% for item in checkout.line_items %}\n  {% if item.variant.id == 7387208286253 %}\n    {% assign found_title = true %}\n  {% endif %}\n{% endfor %}\n\n{% if checkout.subtotal_price > 10000 and found_title == false %}\n<script>\n  $( document ).ready(function() {\n      var variantId = 7387208286253;\n      jQuery.post('/cart/add.js', {\n        quantity: 1,\n        id: variantId\n      });\n      setTimeout(\n        function() {\n          window.location.reload(true);\n        }, 1000);\n  });\n<\/script>\n{% endif %}\n")),(0,r.kt)("h2",{id:"ajax---mini-cart"},"Ajax - Mini Cart"),(0,r.kt)("h3",{id:"create-the-liquid-file"},"Create the Liquid file"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Go to ",(0,r.kt)("a",{parentName:"li",href:"/docs/dev/cart-mini_cart#create-the-liquid-file"},"Mini Cart - Create the Liquid file")),(0,r.kt)("li",{parentName:"ul"},"At the beginning of the ",(0,r.kt)("inlineCode",{parentName:"li"},"cart.mini.liquid")," add this line ",(0,r.kt)("inlineCode",{parentName:"li"},"{% layout none %}")," (For more explanation go to ",(0,r.kt)("a",{parentName:"li",href:"/docs/dev/dev"},"Layout Tricks"),")")),(0,r.kt)("h3",{id:"create-the-javascript-file"},"Create the JavaScript file"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In your Shopify workspace go to ",(0,r.kt)("inlineCode",{parentName:"li"},"assets")),(0,r.kt)("li",{parentName:"ul"},"Edit an existing ",(0,r.kt)("inlineCode",{parentName:"li"},".js")," file or create it ",(0,r.kt)("em",{parentName:"li"},"e.g (",(0,r.kt)("inlineCode",{parentName:"em"},"ajax-mini-cart.js"),")")),(0,r.kt)("li",{parentName:"ul"},"Put the following code inside and do some modifications"),(0,r.kt)("li",{parentName:"ul"},"Save your file")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"/**\n   * -------------------------\n   * ShpCustom: Ajax Cart\n   * -------------------------\n   */\n\n// If You don't already have a custom global object created\n// e.g ShpCustom can be what ever you want\nwindow.ShpCustom = window.ShpCustom || {cart: {}};\n\n(function() {\n  ShpCustom.Cart.onItemAdded = function() {\n    ShpCustom.Cart.getCart();\n  };\n\n  ShpCustom.Cart.onError = function(XMLHttpRequest, textStatus) {\n    var data = eval('(' + XMLHttpRequest.responseText.description + ')');\n    alert(data);\n  };\n\n  ShpCustom.Cart.getCart = function() {\n    var params = {\n      type: 'GET',\n      url: '/cart?view=mini',\n      success: function(line_html) {\n        if(line_html) {\n          const $line_html = $(line_html);\n          // Get number of item in cart\n          const cartUpdateCount = $line_html.find('Put your ItemCount element class or Id e.g. .js-cart-update-count').text();\n\n          $('Put your mini cart principal class or principal Id e.g. .cp-quick_cart').find('.product-items').replaceWith($line_html);\n          $('Put your ItemCount element class or Id e.g. .js-cart-update-count').text(cartUpdateCount);\n\n          // Show the mini cart\n          $('#popup-checkout').addClass('active');\n        }\n      },\n      error: function(XMLHttpRequest, textStatus) {\n        ShpCustom.Cart.onError(XMLHttpRequest, textStatus);\n      }\n    };\n    $.ajax(params);\n  };\n\n  ShpCustom.Cart.addItemFromForm = function(data, callback) {\n    var params = {\n      type: 'POST',\n      url: '/cart/add.js',\n      data: data,\n      dataType: 'json',\n      success: function(line_item) {\n        if ((typeof callback) === 'function') {\n          callback();\n        }\n        ShpCustom.Cart.onItemAdded(line_item);\n      },\n      error: function(XMLHttpRequest, textStatus) {\n        if ((typeof callback) === 'function') {\n          callback();\n        }\n        ShpCustom.Cart.onError(XMLHttpRequest, textStatus);\n      }\n    };\n    $.ajax(params);\n  }\n})();\n")),(0,r.kt)("h3",{id:"update-the-layout-file"},"Update the layout file"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In your Shopify workspace go to ",(0,r.kt)("inlineCode",{parentName:"li"},"layout")),(0,r.kt)("li",{parentName:"ul"},"Open the ",(0,r.kt)("inlineCode",{parentName:"li"},"theme.liquid")," file"),(0,r.kt)("li",{parentName:"ul"},"At the bottom of the file before the ",(0,r.kt)("inlineCode",{parentName:"li"},"</body>")," add",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-html"},'  <script src="{{ \'name_of_your_file.js\' | asset_url }}" defer="defer"><\/script>\n'))),(0,r.kt)("li",{parentName:"ul"},"Save your file")),(0,r.kt)("h3",{id:"how-to-use-it"},"How to use it"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"E.g. use it on products slider with multiple Add To Cart Button")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"In your Shopify workspace go to your liquid file for one slide")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"At the end of the file add"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-html"},"  <script>\n    jQuery('uniq id of the product form').submit(function(event) {\n      event.preventDefault();\n\n      const $submitButton = jQuery('uniq id of the product form or just this').find('Your add to cart button class e.g. .js-add-to-cart');\n\n      $submitButton.attr('disabled', 'disabled');\n      ShpCustom.Cart.addItemFromForm(jQuery(this).serialize(), () => {\n        $submitButton.removeAttr('disabled');\n      });\n    });\n  <\/script>\n")))),(0,r.kt)("h2",{id:"mini-cart"},"Mini Cart"),(0,r.kt)("h3",{id:"create-the-liquid-file-1"},"Create the Liquid file"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In your Shopify workspace go to ",(0,r.kt)("inlineCode",{parentName:"li"},"templates")),(0,r.kt)("li",{parentName:"ul"},"Create a liquid file name ",(0,r.kt)("inlineCode",{parentName:"li"},"cart.mini.liquid")," (For more explanation go to ",(0,r.kt)("a",{parentName:"li",href:"/docs/dev/dev"},"Alternative Template"),")"),(0,r.kt)("li",{parentName:"ul"},"Put your Mini Cart HTML code (or include it ",(0,r.kt)("em",{parentName:"li"},"e.g.",(0,r.kt)("inlineCode",{parentName:"em"},"{% include 'cp-quick_cart_inner' %}")),") inside the file"),(0,r.kt)("li",{parentName:"ul"},"Save your file")),(0,r.kt)("p",null,"(",(0,r.kt)("inlineCode",{parentName:"p"},"cart.mini.liquid"),")"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"  {% include 'cp-quick_cart_inner' %}\n")),(0,r.kt)("p",null,"(",(0,r.kt)("inlineCode",{parentName:"p"},"cp-quick_cart.liquid"),")"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'class:"lineNo"','class:"lineNo"':!0},'  <div class="cp-quick_cart">\n    <div class="popup popup--checkout" id="popup-checkout">\n      <button class="popup__close js-popup-close">\n        <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 17 17">\n          <path fill="currentColor" d="M9.467 8.75l-.25-.25.25-.25L16.852.865a.502.502 0 0 0 0-.716.502.502 0 0 0-.717 0L8.751 7.532l-.25.25-.252-.25L.865.15a.502.502 0 0 0-.717 0 .503.503 0 0 0 0 .716L7.533 8.25l.25.25-.25.25-7.385 7.385a.507.507 0 0 0 .717.717l7.384-7.385.251-.25.25.25 7.385 7.384a.502.502 0 0 0 .717 0 .507.507 0 0 0 0-.716z"/>\n        </svg>\n      </button>\x3c!-- popup__close --\x3e\n\n      <div class="popup__background js-popup-close"></div>\x3c!-- /.popup__background --\x3e\n\n      <div class="popup__inner">\n        {% include \'cp-quick_cart_inner\' %}\n      </div>\x3c!-- /.popup__inner --\x3e\n    </div>\x3c!-- /.popup --\x3e\n  </div>\x3c!-- /.cp-quick_cart --\x3e\n')),(0,r.kt)("p",null,"(",(0,r.kt)("inlineCode",{parentName:"p"},"cp-quick_cart_inner.liquid"),")"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'  <div class="product-items">\n    <div class="product-items__inner">\n      <div class="product-item product-item--alt">\n        <form action="/cart" method="post">\n          {% for item in cart.items %}\n            <div class="product__inner">\n              <div class="product__image">\n                <div class="product__image-inner"></div>\n              </div>\x3c!-- /.product__image --\x3e\n\n              <div class="product__content">\n                <h4 class="product__title">\n                  <span>{{ item.product.title }}</span>\n                </h4>\x3c!-- /.product__title --\x3e\n\n                <div class="product__price">\n                  <span>{{ item.final_line_price | money }}</span>\n                </div>\x3c!-- /.product__price --\x3e\n              </div>\x3c!-- /.product__content --\x3e\n            </div>\x3c!-- /.product__inner --\x3e\n            <input type="hidden" name="updates[]" id="updates_{{ item.key }}" value="{{ item.quantity }}" min="0">\n          {% endfor %}\n\n          <div class="product__actions">\n            <a href="/cart" class="btn btn--dark btn--block">\n              {{ \'general.cart.show_cart\' | t }} (<span class="js-cart-update-count">{{ cart.item_count }}</span>)\n            </a>\n\n            <button type="submit" name="checkout" class="btn btn--dark-full btn--block">{{ \'general.cart.payment\' | t }}</button>\n          </div>\x3c!-- /.product__actions --\x3e\n        </form>\n      </div>\x3c!-- /.product-item --\x3e\n    </div>\x3c!-- /.product-items__inner --\x3e\n  </div>\x3c!-- /.product-items --\x3e\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Why not just include ",(0,r.kt)("inlineCode",{parentName:"p"},"cp-quick_cart.liquid")," inside ",(0,r.kt)("inlineCode",{parentName:"p"},"cart.mini.liquid")," ?\nIn this example we separate the inner cart and the pop up container in the case of updating mini cart by ajax see ","[Ajax Mini Cart]")),(0,r.kt)("h3",{id:"add-payment-button"},"Add payment button"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"As you can see in the ",(0,r.kt)("inlineCode",{parentName:"li"},"cp-quick_cart_inner.liquid")," to add a direct payment button you need to:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Encompass all your mini cart items into",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-html"},'  <form action="/cart" method="post"></form>\n'))),(0,r.kt)("li",{parentName:"ul"},"Put in every item :",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-html"},'  <input type="hidden" name="updates[]" id="updates_{{ item.key }}" value="{{ item.quantity }}" min="0">\n'))),(0,r.kt)("li",{parentName:"ul"},"And finaly add",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-html"},'  <button type="submit" name="checkout">{{ \'general.cart.payment\' | t }}</button>\n')))))),(0,r.kt)("h2",{id:"display-shipping-rates-estimates-in-the-cart"},"Display Shipping rates estimates in the Cart"),(0,r.kt)("p",null,"See ",(0,r.kt)("a",{parentName:"p",href:"https://community.shopify.com/c/Shopify-Design/Cart-Add-a-shipping-rates-calculator-to-your-cart/td-p/616554"},"https://community.shopify.com/c/Shopify-Design/Cart-Add-a-shipping-rates-calculator-to-your-cart/td-p/616554")))}d.isMDXComponent=!0}}]);