(self.webpackChunknewshopify=self.webpackChunknewshopify||[]).push([[613],{3905:function(e,t,s){"use strict";s.d(t,{Zo:function(){return l},kt:function(){return h}});var r=s(7294);function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t){if(null==e)return{};var s,r,i=function(e,t){if(null==e)return{};var s,r,i={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(i[s]=e[s]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(i[s]=e[s])}return i}var c=r.createContext({}),d=function(e){var t=r.useContext(c),s=t;return e&&(s="function"==typeof e?e(t):a(a({},t),e)),s},l=function(e){var t=d(e.components);return r.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var s=e.components,i=e.mdxType,n=e.originalType,c=e.parentName,l=o(e,["components","mdxType","originalType","parentName"]),p=d(s),h=i,g=p["".concat(c,".").concat(h)]||p[h]||u[h]||n;return s?r.createElement(g,a(a({ref:t},l),{},{components:s})):r.createElement(g,a({ref:t},l))}));function h(e,t){var s=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var n=s.length,a=new Array(n);a[0]=p;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o.mdxType="string"==typeof e?e:i,a[1]=o;for(var d=2;d<n;d++)a[d]=s[d];return r.createElement.apply(null,a)}return r.createElement.apply(null,s)}p.displayName="MDXCreateElement"},9203:function(e,t,s){"use strict";s.r(t),s.d(t,{frontMatter:function(){return o},contentTitle:function(){return c},metadata:function(){return d},toc:function(){return l},default:function(){return p}});var r=s(2122),i=s(9756),n=(s(7294),s(3905)),a=["components"],o={},c="Fastmag",d={unversionedId:"modules/fastmag",id:"modules/fastmag",isDocsHomePage:!1,title:"Fastmag",description:"Introduction",source:"@site/docs/modules/fastmag.md",sourceDirName:"modules",slug:"/modules/fastmag",permalink:"/docs/modules/fastmag",version:"current",frontMatter:{},sidebar:"docs",previous:{title:"CMS",permalink:"/docs/modules/cms"},next:{title:"SoCloz",permalink:"/docs/modules/socloz"}},l=[{value:"Introduction",id:"introduction",children:[]},{value:"Routes (/fastmag)",id:"routes-fastmag",children:[{value:"/ping",id:"ping",children:[]},{value:"/settings",id:"settings",children:[]},{value:"POST /settings",id:"post-settings",children:[]},{value:"/promo",id:"promo",children:[]},{value:"/promo/:tag",id:"promotag",children:[]},{value:"/check-giftcard",id:"check-giftcard",children:[]},{value:"/sync-order-statuses",id:"sync-order-statuses",children:[]},{value:"/update-tracking/:orderId",id:"update-trackingorderid",children:[]},{value:"/sync-order-deliveries",id:"sync-order-deliveries",children:[]},{value:"/fetch_tracking_numbers.json",id:"fetch_tracking_numbersjson",children:[]},{value:"/fetch_stock.json",id:"fetch_stockjson",children:[]},{value:"/sync-stock",id:"sync-stock",children:[]},{value:"/sync-prices",id:"sync-prices",children:[]},{value:"/sync-differential-stock",id:"sync-differential-stock",children:[]},{value:"/products-by-season",id:"products-by-season",children:[]},{value:"/fastmag-to-shopify",id:"fastmag-to-shopify",children:[]},{value:"/sync-products-by-season",id:"sync-products-by-season",children:[]},{value:"/get-inventory-prices",id:"get-inventory-prices",children:[]},{value:"/sync-inventory-fastmagid",id:"sync-inventory-fastmagid",children:[]},{value:"/post-order",id:"post-order",children:[]},{value:"/get-orders",id:"get-orders",children:[]},{value:"/get-all-orders",id:"get-all-orders",children:[]},{value:"/mail-giftcard",id:"mail-giftcard",children:[]},{value:"/post-customer",id:"post-customer",children:[]},{value:"/get-products",id:"get-products",children:[]},{value:"/get-productsBySeason",id:"get-productsbyseason",children:[]},{value:"/get-order",id:"get-order",children:[]},{value:"/get-orderByShopifyIds",id:"get-orderbyshopifyids",children:[]},{value:"/get-customer",id:"get-customer",children:[]},{value:"/get-giftcard",id:"get-giftcard",children:[]},{value:"/get-giftcards",id:"get-giftcards",children:[]},{value:"/get-pme",id:"get-pme",children:[]},{value:"/get-pmes",id:"get-pmes",children:[]},{value:"/get-pmes-mag",id:"get-pmes-mag",children:[]},{value:"/get-pmes-web",id:"get-pmes-web",children:[]},{value:"/get-fullinventory",id:"get-fullinventory",children:[]},{value:"/get-inventory",id:"get-inventory",children:[]},{value:"/get-product",id:"get-product",children:[]},{value:"/get-product-by-gencod/:gencod",id:"get-product-by-gencodgencod",children:[]},{value:"/post-transfer-stock",id:"post-transfer-stock",children:[]},{value:"/post-giftcard",id:"post-giftcard",children:[]},{value:"/get-product-by-tag",id:"get-product-by-tag",children:[]},{value:"/sync-sftp-images",id:"sync-sftp-images",children:[]},{value:"/get-avoirs",id:"get-avoirs",children:[]},{value:"/publish-products-ready-to-sell",id:"publish-products-ready-to-sell",children:[]},{value:"/get-solde-pme/:id",id:"get-solde-pmeid",children:[]},{value:"POST /job-application",id:"post-job-application",children:[]}]},{value:"Services",id:"services",children:[{value:"avoir",id:"avoir",children:[]},{value:"catalog",id:"catalog",children:[]},{value:"customer",id:"customer",children:[]},{value:"giftcard",id:"giftcard",children:[]},{value:"inventory",id:"inventory",children:[]},{value:"order",id:"order",children:[]},{value:"pme",id:"pme",children:[]},{value:"query",id:"query",children:[]}]},{value:"CRON",id:"cron",children:[{value:"services.syncDifferentialStocks()",id:"servicessyncdifferentialstocks",children:[]},{value:"services.syncOrderStatuses()",id:"servicessyncorderstatuses",children:[]},{value:"services.syncOrderDeliveries()",id:"servicessyncorderdeliveries",children:[]},{value:"services.sendGiftcards(SHOP)",id:"servicessendgiftcardsshop",children:[]},{value:"services.syncStocks()",id:"servicessyncstocks",children:[]},{value:"services.syncPrices()",id:"servicessyncprices",children:[]},{value:"services.syncSftpImages()",id:"servicessyncsftpimages",children:[]},{value:"services.publishProductsReadyToSell()",id:"servicespublishproductsreadytosell",children:[]}]}],u={toc:l};function p(e){var t=e.components,s=(0,i.Z)(e,a);return(0,n.kt)("wrapper",(0,r.Z)({},u,s,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"fastmag"},"Fastmag"),(0,n.kt)("h2",{id:"introduction"},"Introduction"),(0,n.kt)("p",null,"This module is a complete module synchronizing Fastmag with Shopify."),(0,n.kt)("h2",{id:"routes-fastmag"},"Routes (/fastmag)"),(0,n.kt)("h3",{id:"ping"},"/ping"),(0,n.kt)("p",null,"returns a success JSON"),(0,n.kt)("h3",{id:"settings"},"/settings"),(0,n.kt)("p",null,"returns the fastmag config"),(0,n.kt)("h3",{id:"post-settings"},"POST /settings"),(0,n.kt)("p",null,"Updates the fastmag config"),(0,n.kt)("h3",{id:"promo"},"/promo"),(0,n.kt)("p",null,"Will create promo (percentage tag) for a specific list of products or collections"),(0,n.kt)("h3",{id:"promotag"},"/promo/:tag"),(0,n.kt)("p",null,"Will remove promo tags from specific products or collections"),(0,n.kt)("h3",{id:"check-giftcard"},"/check-giftcard"),(0,n.kt)("p",null,"Will check if a Fastmag giftcard exists and is activated and will synchronize it with Shopify if ok."),(0,n.kt)("h3",{id:"sync-order-statuses"},"/sync-order-statuses"),(0,n.kt)("p",null,"Synchronizes the order statuses by getting all unshipped orders from Shopify and looking at the statuses in Fastmag. If the status has changed, the order in Shopify is updated + get the tracking id when status is 300 or 305."),(0,n.kt)("p",null,"Async call : I don't wait for an answer to send the browser's response"),(0,n.kt)("h3",{id:"update-trackingorderid"},"/update-tracking/:orderId"),(0,n.kt)("p",null,"Will check on TNT if a specific order's tracking number has evolved and updates SHopify"),(0,n.kt)("h3",{id:"sync-order-deliveries"},"/sync-order-deliveries"),(0,n.kt)("p",null,"Synchronizes the order delivery status by getting all shipped orders from Shopify and looking at the statuses in Chronopost. If the status has changed, the order\nin Shopify is updated.\nAsync call : I don't wait for an answer to send the browser's response"),(0,n.kt)("h3",{id:"fetch_tracking_numbersjson"},"/fetch_tracking_numbers.json"),(0,n.kt)("p",null,"This route is called by Shopify (almost hourly).\nSync specific orders with tracking numbers from Fastmag"),(0,n.kt)("h3",{id:"fetch_stockjson"},"/fetch_stock.json"),(0,n.kt)("p",null,"Fulfillment service endpoint called by Shopify every hour for a full stock update and called at every variant update for a single variant's stock update"),(0,n.kt)("h3",{id:"sync-stock"},"/sync-stock"),(0,n.kt)("p",null,"Synchronizes asynchronously the stock from Fastmag to Shopify. The stock is calculated based on 2 different stocks in Fastmag. We use the bulk inventory update to speed things up"),(0,n.kt)("h3",{id:"sync-prices"},"/sync-prices"),(0,n.kt)("p",null,"Synchronizes asynchronously the prices from Fastmag to Shopify. It requests the tables products and prixremisetc to calculate the final price and the original price (taking into account datedebut and datefin)"),(0,n.kt)("h3",{id:"sync-differential-stock"},"/sync-differential-stock"),(0,n.kt)("p",null,"Synchronize stocks updated in Fastmag since the last synchronization. We use the last_modified date from fastmag and keep the last call in dynamodb"),(0,n.kt)("h3",{id:"products-by-season"},"/products-by-season"),(0,n.kt)("p",null,"Returns Fastmag products for a specific season"),(0,n.kt)("h3",{id:"fastmag-to-shopify"},"/fastmag-to-shopify"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"DEPRECATED* Asynchronously creates or updates products of a specific season from Fastmag to Shopify")),(0,n.kt)("h3",{id:"sync-products-by-season"},"/sync-products-by-season"),(0,n.kt)("p",null,"Asynchronously creates or updates products of a specific season from Fastmag to Shopify"),(0,n.kt)("h3",{id:"get-inventory-prices"},"/get-inventory-prices"),(0,n.kt)("p",null,"Returns the list of stock and prices from Fastmag"),(0,n.kt)("h3",{id:"sync-inventory-fastmagid"},"/sync-inventory-fastmagid"),(0,n.kt)("p",null,"Checks that the FastmagID exists on Shopify products and updates them if necessary (used during the first import)"),(0,n.kt)("h3",{id:"post-order"},"/post-order"),(0,n.kt)("p",null,"Creates an order in Fastmag from Shopify."),(0,n.kt)("h3",{id:"get-orders"},"/get-orders"),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"DEPRECATED")),(0,n.kt)("h3",{id:"get-all-orders"},"/get-all-orders"),(0,n.kt)("p",null,"Returns all orders from fastmag"),(0,n.kt)("h3",{id:"mail-giftcard"},"/mail-giftcard"),(0,n.kt)("p",null,"Searches a giftcard in DynamoDB and if found, plans a repost of the mail (in case the customer has not received the first one)"),(0,n.kt)("h3",{id:"post-customer"},"/post-customer"),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"DEPRECATED")),(0,n.kt)("h3",{id:"get-products"},"/get-products"),(0,n.kt)("p",null,"Returns all products from Fastmag"),(0,n.kt)("h3",{id:"get-productsbyseason"},"/get-productsBySeason"),(0,n.kt)("p",null,"Returns all products of a particular season from Fastmag."),(0,n.kt)("h3",{id:"get-order"},"/get-order"),(0,n.kt)("p",null,"Returns a specific order from fastmag"),(0,n.kt)("h3",{id:"get-orderbyshopifyids"},"/get-orderByShopifyIds"),(0,n.kt)("p",null,"Returns a specific order from fastmag based on a shopify order's iD"),(0,n.kt)("h3",{id:"get-customer"},"/get-customer"),(0,n.kt)("p",null,"Searches a customer in Fastmag from its email"),(0,n.kt)("h3",{id:"get-giftcard"},"/get-giftcard"),(0,n.kt)("p",null,"Searches a Giftcard in Fastmag based on its fastmag ID"),(0,n.kt)("h3",{id:"get-giftcards"},"/get-giftcards"),(0,n.kt)("p",null,"Returns all giftcards from Fastmag"),(0,n.kt)("h3",{id:"get-pme"},"/get-pme"),(0,n.kt)("p",null,'Returns a "porte-monnaie-\xe9lectronique" (PME) from Fastmag based on its code'),(0,n.kt)("h3",{id:"get-pmes"},"/get-pmes"),(0,n.kt)("p",null,"returns a list of PME's from fastmag"),(0,n.kt)("h3",{id:"get-pmes-mag"},"/get-pmes-mag"),(0,n.kt)("p",null,"returns a list of PME's delivered in physical stores from fastmag"),(0,n.kt)("h3",{id:"get-pmes-web"},"/get-pmes-web"),(0,n.kt)("p",null,"returns a list of PME's delivered in WEB stores from fastmag"),(0,n.kt)("h3",{id:"get-fullinventory"},"/get-fullinventory"),(0,n.kt)("p",null,"Returns the full stock of Fastmag"),(0,n.kt)("h3",{id:"get-inventory"},"/get-inventory"),(0,n.kt)("p",null,"Returns a specific stock for a SKU"),(0,n.kt)("h3",{id:"get-product"},"/get-product"),(0,n.kt)("p",null,"Returns a product from Fastmag based on its SKU"),(0,n.kt)("h3",{id:"get-product-by-gencodgencod"},"/get-product-by-gencod/:gencod"),(0,n.kt)("p",null,"Returns a product from Fastmag based on its GENCOD"),(0,n.kt)("h3",{id:"post-transfer-stock"},"/post-transfer-stock"),(0,n.kt)("p",null,"Transfers stocks of an order beetween web and general stock in Fastmag"),(0,n.kt)("h3",{id:"post-giftcard"},"/post-giftcard"),(0,n.kt)("p",null,"Post a mail to inform the consignee's of a giftcard"),(0,n.kt)("h3",{id:"get-product-by-tag"},"/get-product-by-tag"),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"DEPRECATED"),"\nget a list of products from Shopify with a specific tag"),(0,n.kt)("h3",{id:"sync-sftp-images"},"/sync-sftp-images"),(0,n.kt)("p",null,"Sync Images on a SFTP to a S3 repository then syncs with Shopify products."),(0,n.kt)("h3",{id:"get-avoirs"},"/get-avoirs"),(0,n.kt)("p",null,"Returns avoirs from Fastmag"),(0,n.kt)("h3",{id:"publish-products-ready-to-sell"},"/publish-products-ready-to-sell"),(0,n.kt)("p",null,"Publishes products on Shopify fulfilling specific conditions."),(0,n.kt)("h3",{id:"get-solde-pmeid"},"/get-solde-pme/:id"),(0,n.kt)("p",null,"Returns the remaining amount of a PME from Fastmag"),(0,n.kt)("h3",{id:"post-job-application"},"POST /job-application"),(0,n.kt)("p",null,"Will send an email with attachments uploaded by an applicant to a job offer"),(0,n.kt)("h2",{id:"services"},"Services"),(0,n.kt)("h3",{id:"avoir"},"avoir"),(0,n.kt)("p",null,"This package contains all calls associated with avoirs"),(0,n.kt)("h3",{id:"catalog"},"catalog"),(0,n.kt)("p",null,"This package contains all calls associated with catalog"),(0,n.kt)("h3",{id:"customer"},"customer"),(0,n.kt)("p",null,"This package contains all calls associated with customer"),(0,n.kt)("h3",{id:"giftcard"},"giftcard"),(0,n.kt)("p",null,"This package contains all calls associated with giftcard"),(0,n.kt)("h3",{id:"inventory"},"inventory"),(0,n.kt)("p",null,"This package contains all calls associated with inventory"),(0,n.kt)("h3",{id:"order"},"order"),(0,n.kt)("p",null,"This package contains all calls associated with order"),(0,n.kt)("h3",{id:"pme"},"pme"),(0,n.kt)("p",null,"This package contains all calls associated with PME"),(0,n.kt)("h3",{id:"query"},"query"),(0,n.kt)("p",null,"This services formats and encapsulates calls to Fastmag"),(0,n.kt)("h2",{id:"cron"},"CRON"),(0,n.kt)("h3",{id:"servicessyncdifferentialstocks"},"services.syncDifferentialStocks()"),(0,n.kt)("p",null,"Checks the stock movements from Fastmag every 2 minutes"),(0,n.kt)("h3",{id:"servicessyncorderstatuses"},"services.syncOrderStatuses()"),(0,n.kt)("p",null,"Sync order statuses every hour at xh35 minutes (shipment preparation)"),(0,n.kt)("h3",{id:"servicessyncorderdeliveries"},"services.syncOrderDeliveries()"),(0,n.kt)("p",null,"Sync order statuses every hour at xh50 minutes (Chronopost)"),(0,n.kt)("h3",{id:"servicessendgiftcardsshop"},"services.sendGiftcards(SHOP)"),(0,n.kt)("p",null,"Sends the giftcards emails every 45'"),(0,n.kt)("h3",{id:"servicessyncstocks"},"services.syncStocks()"),(0,n.kt)("p",null,"Sync the stocks every hour at h:10, from 0:10 to 2:10 and 5:10 to 23:10"),(0,n.kt)("h3",{id:"servicessyncprices"},"services.syncPrices()"),(0,n.kt)("p",null,"Sync the prices every hour at h:40, from 0:40 to 2:40 and 5:40 to 23:40"),(0,n.kt)("h3",{id:"servicessyncsftpimages"},"services.syncSftpImages()"),(0,n.kt)("p",null,"Check the SFTP hosting images, transfer the new images to S3 and sync Shopify with the new images every 2 hours"),(0,n.kt)("h3",{id:"servicespublishproductsreadytosell"},"services.publishProductsReadyToSell()"),(0,n.kt)("p",null,"Check products in DRAFT mode ready to be published on the store every day @21:45"))}p.isMDXComponent=!0}}]);